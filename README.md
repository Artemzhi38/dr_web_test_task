# dr_web_test_task

Сервис файлового хранилища, реализованный на фреймворке Flask и использующий библиотеку flask_restful.

Сервис позволяет загружать в хранилище авторизованным пользователям файлы расширений "txt", "pdf", "png", "jpg", "jpeg", "gif".
Загруженные файлы получают имя соответствующее их хэшу(алгоритм md5) и хранятся в директории хранилища (папка "store/" в корне проекта) с именем соответствующим первым двум буквам полученного хэша.
Передав значение хэша, соответствующее имени файла в хранилище, любой пользователь может скачать из хранилища файл.
Удалить файл из хранилища может только создавший его пользователь, также передав хэш в соответствующий эндпоинт. Данные об авторстве каждого файла в хранилище хранятся в Redis.

## Getting Started

Проект можно запустить в Docker с помощью команды:
```shell
docker-compose up -d --build    
```

Далее после билда образа и запуска заходим на http://127.0.0.1:8000/. 
Это дополнительный функционал, не описанный в ТЗ, который позволяет загружать и скачивать файлы из браузера, а также отображает текущее состояние хранилища, выводя списком всё его содержимое, а также автора каждого файла.

## Список эндпоинтов для реализации необходимого функционала сервиса:

### Загрузка файла
POST http://127.0.0.1:8000/upload
Требует авторизации. Необходимо приложить файл в теле запроса

### Скачивание файла
POST http://127.0.0.1:8000/download/<file_hash>
Не требует авторизации. Необходимо добавить в запрос хэш(имя в хранилище) необходимого файла.

### Удаление файла
POST http://127.0.0.1:8000/delete/<file_hash>
Требует авторизации пользователя, загрузившего файл. Необходимо добавить в запрос хэш(имя в хранилище) необходимого файла.

## Данные пользователей для авторизации

Эти данные вынесены в файл переменных окружения .env, пример которого приведён ниже.
```bash
SECRET_KEY = 'secretkey'
DEBUG = True
USER_ONE = usr1
PASSWORD_ONE = pwd1
USER_TWO = usr2
PASSWORD_TWO = pwd2
```
По условиям ТЗ регистрация пользователей в веб-сервисе не предусмотрена, поэтому для изменения логинов и паролей необходимо править .env вручную.
Для добавления новых пользователей необходимо кроме файла .env внести соответствующие изменения в файл main.py:
```python
app.config["USER_DATA"] = {
    os.getenv("USER_ONE"): os.getenv("PASSWORD_ONE"),
    os.getenv("USER_TWO"): os.getenv("PASSWORD_TWO"),
}
```

## Дополнительно

Код проекта был проверен линтерами black и isort
Зависимости указаны в файле requirements.txt